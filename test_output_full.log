============================= test session starts ==============================
platform darwin -- Python 3.9.6, pytest-7.3.1, pluggy-1.0.0 -- /Library/Developer/CommandLineTools/usr/bin/python3
cachedir: .pytest_cache
metadata: {'Python': '3.9.6', 'Platform': 'macOS-15.6.1-arm64-arm-64bit', 'Packages': {'pytest': '7.3.1', 'pluggy': '1.0.0'}, 'Plugins': {'asyncio': '0.21.0', 'anyio': '4.9.0', 'integration': '0.2.3', 'html': '4.1.1', 'xdist': '3.8.0', 'timeout': '2.4.0', 'metadata': '3.1.1', 'mock': '3.10.0', 'Faker': '30.8.2', 'cov': '4.0.0', 'benchmark': '4.0.0'}}
benchmark: 4.0.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /Users/dylantullberg/Developer/riptide-test-sites
configfile: pytest.ini
plugins: asyncio-0.21.0, anyio-4.9.0, integration-0.2.3, html-4.1.1, xdist-3.8.0, timeout-2.4.0, metadata-3.1.1, mock-3.10.0, Faker-30.8.2, cov-4.0.0, benchmark-4.0.0
asyncio: mode=strict
collecting ... collected 163 items

tests/test_anti_bot.py::TestAntiBotLite::test_site_is_healthy FAILED     [  0%]
tests/test_anti_bot.py::TestAntiBotLite::test_normal_user_agent_allowed FAILED [  1%]
tests/test_anti_bot.py::TestAntiBotLite::test_bot_user_agent_blocked FAILED [  1%]
tests/test_anti_bot.py::TestAntiBotLite::test_rate_limiting_enforced FAILED [  2%]
tests/test_anti_bot.py::TestAntiBotLite::test_honeypot_field_detection PASSED [  3%]
tests/test_anti_bot.py::TestAntiBotLite::test_javascript_challenge_present PASSED [  3%]
tests/test_anti_bot.py::TestAntiBotLite::test_cookie_validation FAILED   [  4%]
tests/test_anti_bot.py::TestAntiBotLite::test_referer_header_checking FAILED [  4%]
tests/test_anti_bot.py::TestAntiBotLite::test_timing_based_detection PASSED [  5%]
tests/test_anti_bot.py::TestAntiBotLite::test_ip_based_blocking PASSED   [  6%]
tests/test_anti_bot.py::TestAntiBotBypass::test_googlebot_allowed PASSED [  6%]
tests/test_anti_bot.py::TestAntiBotBypass::test_robots_txt_provides_guidance FAILED [  7%]
tests/test_auth_session.py::TestAuthenticationSession::test_site_is_healthy PASSED [  7%]
tests/test_auth_session.py::TestAuthenticationSession::test_login_page_accessible FAILED [  8%]
tests/test_auth_session.py::TestAuthenticationSession::test_csrf_token_present FAILED [  9%]
tests/test_auth_session.py::TestAuthenticationSession::test_protected_page_requires_auth FAILED [  9%]
======================================================================
âœ… Test session completed
======================================================================



=================================== FAILURES ===================================
/Users/dylantullberg/Developer/riptide-test-sites/tests/test_anti_bot.py:33: AssertionError: anti-bot-lite.site is not healthy
/Users/dylantullberg/Developer/riptide-test-sites/tests/test_anti_bot.py:51: AssertionError: Normal browser user-agent should be allowed
/Users/dylantullberg/Developer/riptide-test-sites/tests/test_anti_bot.py:89: AssertionError: At least 2 bot user-agents should be blocked, got 0
/Users/dylantullberg/Developer/riptide-test-sites/tests/test_anti_bot.py:119: AssertionError: Rate limiting should be enforced after rapid requests
/Users/dylantullberg/Developer/riptide-test-sites/tests/test_anti_bot.py:215: AssertionError: Site should set cookies for tracking
/Users/dylantullberg/Developer/riptide-test-sites/tests/test_anti_bot.py:239: AssertionError: At least one referer pattern should work
/Users/dylantullberg/Developer/riptide-test-sites/tests/test_anti_bot.py:340: AssertionError: robots.txt should exist
/Users/dylantullberg/Developer/riptide-test-sites/tests/test_auth_session.py:40: AssertionError: Login page should be accessible
/Users/dylantullberg/Developer/riptide-test-sites/tests/test_auth_session.py:70: AssertionError: Login form should have CSRF token
/Users/dylantullberg/Developer/riptide-test-sites/tests/test_auth_session.py:92: AssertionError: Should redirect to login page
=========================== short test summary info ============================
FAILED tests/test_anti_bot.py::TestAntiBotLite::test_site_is_healthy - Assert...
FAILED tests/test_anti_bot.py::TestAntiBotLite::test_normal_user_agent_allowed
FAILED tests/test_anti_bot.py::TestAntiBotLite::test_bot_user_agent_blocked
FAILED tests/test_anti_bot.py::TestAntiBotLite::test_rate_limiting_enforced
FAILED tests/test_anti_bot.py::TestAntiBotLite::test_cookie_validation - Asse...
FAILED tests/test_anti_bot.py::TestAntiBotLite::test_referer_header_checking
FAILED tests/test_anti_bot.py::TestAntiBotBypass::test_robots_txt_provides_guidance
FAILED tests/test_auth_session.py::TestAuthenticationSession::test_login_page_accessible
FAILED tests/test_auth_session.py::TestAuthenticationSession::test_csrf_token_present
FAILED tests/test_auth_session.py::TestAuthenticationSession::test_protected_page_requires_auth
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 10 failures !!!!!!!!!!!!!!!!!!!!!!!!!!
========================= 10 failed, 6 passed in 2.48s =========================
